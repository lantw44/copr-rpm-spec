From 32f0aae170816bcf4682ea0d04fbf7a14b4feb7f Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jdapena@igalia.com>
Date: Fri, 21 Aug 2020 20:16:26 +0000
Subject: [PATCH] GCC: pending fix for ServiceWorkerRunningInfo noexcept in
 move constructor
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

It is not enough to make StrongAlias noexcept. TokenType needs to also
provide noexcept move constructor.

Bug: 819294
Change-Id: Ib85faa18f66b41053fb71ecee32e818e05685080
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/2369180
Reviewed-by: Daniel Cheng <dcheng@chromium.org>
Commit-Queue: Jos√© Dapena Paz <jdapena@igalia.com>
Cr-Commit-Position: refs/heads/master@{#800697}
---
 base/util/type_safety/token_type.h | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/base/util/type_safety/token_type.h b/base/util/type_safety/token_type.h
index 0a1267953625..2cbfdb70bce3 100644
--- a/base/util/type_safety/token_type.h
+++ b/base/util/type_safety/token_type.h
@@ -23,6 +23,9 @@ class TokenType : public StrongAlias<TypeMarker, base::UnguessableToken> {
   TokenType() : Super(base::UnguessableToken::Create()) {}
   explicit TokenType(const base::UnguessableToken& token) : Super(token) {}
   TokenType(const TokenType& token) : Super(token.value()) {}
+  TokenType(TokenType&& token) noexcept : Super(token.value()) {}
+  TokenType& operator=(const TokenType& token) = default;
+  TokenType& operator=(TokenType&& token) noexcept = default;
 
   // This object allows default assignment operators for compatibility with
   // STL containers.
-- 
2.25.4

