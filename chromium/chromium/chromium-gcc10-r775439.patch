From cd5da994cb70eb13320183e767cae459900d7a31 Mon Sep 17 00:00:00 2001
From: Joshua Peraza <jperaza@chromium.org>
Date: Fri, 5 Jun 2020 05:14:24 +0000
Subject: [PATCH] Update Crashpad to 7a70b0f1513d2787437aafc6593c97cbd0f2d94e

a8ff62676466 Add a bunch of missing string.h includes
4b5a5bac26be win: Make CreatePipe compatible with UWP apps
686852d9d87d linux: update test expectations
86c28287d23a linux: add section header string table to test module
294d233ca09e elf: adjust small DT_STRTAB addresses by load bias
7a70b0f1513d android: correct executable placement in debug rendezvous

Change-Id: Ie34272e560e92779661d804c8664f52e72a86349
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/2231880
Commit-Queue: Mark Mentovai <mark@chromium.org>
Auto-Submit: Joshua Peraza <jperaza@chromium.org>
Reviewed-by: Mark Mentovai <mark@chromium.org>
Cr-Commit-Position: refs/heads/master@{#775439}
---
 third_party/crashpad/README.chromium          |  2 +-
 .../crashpad/client/crashpad_client_win.cc    |  9 ++-
 .../client/simple_address_range_bag.h         |  1 +
 .../crashpad/snapshot/elf/elf_image_reader.cc |  8 +++
 .../snapshot/linux/debug_rendezvous.cc        | 16 +++++
 .../snapshot/linux/debug_rendezvous_test.cc   | 23 +++++--
 .../snapshot/linux/process_reader_linux.cc    |  4 +-
 .../linux/process_reader_linux_test.cc        | 65 ++++++++++++++-----
 .../minidump/minidump_context_converter.cc    |  2 +
 .../crashpad/util/linux/ptrace_client.cc      |  1 +
 .../util/net/http_multipart_builder.cc        |  1 +
 .../util/net/http_transport_socket.cc         |  1 +
 .../crashpad/util/process/process_memory.cc   |  2 +
 .../crashpad/util/stream/log_output_stream.cc |  2 +
 14 files changed, 109 insertions(+), 28 deletions(-)

diff --git a/third_party/crashpad/crashpad/client/simple_address_range_bag.h b/third_party/crashpad/crashpad/client/simple_address_range_bag.h
index c69fa5afd8b2..d288303c4d5b 100644
--- a/third_party/crashpad/crashpad/client/simple_address_range_bag.h
+++ b/third_party/crashpad/crashpad/client/simple_address_range_bag.h
@@ -16,6 +16,7 @@
 #define CRASHPAD_CLIENT_SIMPLE_ADDRESS_RANGE_BAG_H_
 
 #include <stdint.h>
+#include <string.h>
 
 #include <type_traits>
 
diff --git a/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc b/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc
index 0c840deac227..24d2585b376e 100644
--- a/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc
+++ b/third_party/crashpad/crashpad/snapshot/minidump/minidump_context_converter.cc
@@ -14,6 +14,8 @@
 
 #include "snapshot/minidump/minidump_context_converter.h"
 
+#include <string.h>
+
 #include "base/stl_util.h"
 #include "minidump/minidump_context.h"
 
diff --git a/third_party/crashpad/crashpad/util/linux/ptrace_client.cc b/third_party/crashpad/crashpad/util/linux/ptrace_client.cc
index f097ad98593d..43214a18af20 100644
--- a/third_party/crashpad/crashpad/util/linux/ptrace_client.cc
+++ b/third_party/crashpad/crashpad/util/linux/ptrace_client.cc
@@ -16,6 +16,7 @@
 
 #include <errno.h>
 #include <stdio.h>
+#include <string.h>
 
 #include <string>
 
diff --git a/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc b/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc
index 267960b274f9..dda46aa3ce9b 100644
--- a/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc
+++ b/third_party/crashpad/crashpad/util/net/http_multipart_builder.cc
@@ -14,6 +14,7 @@
 
 #include "util/net/http_multipart_builder.h"
 
+#include <string.h>
 #include <sys/types.h>
 
 #include <utility>
diff --git a/third_party/crashpad/crashpad/util/net/http_transport_socket.cc b/third_party/crashpad/crashpad/util/net/http_transport_socket.cc
index 4dd01b6e7a69..b9c6c9c5e064 100644
--- a/third_party/crashpad/crashpad/util/net/http_transport_socket.cc
+++ b/third_party/crashpad/crashpad/util/net/http_transport_socket.cc
@@ -17,6 +17,7 @@
 #include <fcntl.h>
 #include <netdb.h>
 #include <poll.h>
+#include <string.h>
 #include <sys/socket.h>
 
 #include "base/logging.h"
diff --git a/third_party/crashpad/crashpad/util/process/process_memory.cc b/third_party/crashpad/crashpad/util/process/process_memory.cc
index ab87b940fa14..3125e6f3852c 100644
--- a/third_party/crashpad/crashpad/util/process/process_memory.cc
+++ b/third_party/crashpad/crashpad/util/process/process_memory.cc
@@ -14,6 +14,8 @@
 
 #include "util/process/process_memory.h"
 
+#include <string.h>
+
 #include <algorithm>
 
 #include "base/logging.h"
diff --git a/third_party/crashpad/crashpad/util/stream/log_output_stream.cc b/third_party/crashpad/crashpad/util/stream/log_output_stream.cc
index 03c0a5a02dbe..e35bb3b32fc1 100644
--- a/third_party/crashpad/crashpad/util/stream/log_output_stream.cc
+++ b/third_party/crashpad/crashpad/util/stream/log_output_stream.cc
@@ -14,6 +14,8 @@
 
 #include "util/stream/log_output_stream.h"
 
+#include <string.h>
+
 #include <algorithm>
 
 #include "base/logging.h"
-- 
2.26.2

