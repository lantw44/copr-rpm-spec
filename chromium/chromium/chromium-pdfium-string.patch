From 7a6289c5ace52cf88f0e19caa5f78b7c15d0e7a6 Mon Sep 17 00:00:00 2001
From: Miklos Vajna <vmiklos@collabora.co.uk>
Date: Wed, 21 Jul 2021 17:42:30 +0000
Subject: [PATCH] fxcodec, fxge: fix missing includes with libstdc++

These missing includes break the build with gcc/libstdc++, they were not
a problem in practice with clang/libc++.

Change-Id: I40013f97ba7ab06f32aa59f87b04aec06a19478c
Reviewed-on: https://pdfium-review.googlesource.com/c/pdfium/+/83210
Commit-Queue: Lei Zhang <thestig@chromium.org>
Reviewed-by: Lei Zhang <thestig@chromium.org>
---
 core/fxcodec/jpeg/jpegmodule.cpp         | 1 +
 core/fxcodec/jpx/cjpx_decoder.cpp        | 2 ++
 core/fxge/cfx_cliprgn.cpp                | 2 ++
 core/fxge/dib/cfx_bitmapcomposer.cpp     | 2 ++
 core/fxge/dib/cfx_bitmapstorer.cpp       | 2 ++
 core/fxge/dib/cfx_dibbase.cpp            | 2 ++
 core/fxge/dib/cfx_dibitmap.cpp           | 2 ++
 core/fxge/dib/cfx_scanlinecompositor.cpp | 2 ++
 8 files changed, 15 insertions(+)

diff --git a/core/fxcodec/jpeg/jpegmodule.cpp b/core/fxcodec/jpeg/jpegmodule.cpp
index cea0679aa..036f25003 100644
--- a/third_party/pdfium/core/fxcodec/jpeg/jpegmodule.cpp
+++ b/third_party/pdfium/core/fxcodec/jpeg/jpegmodule.cpp
@@ -7,6 +7,7 @@
 #include "core/fxcodec/jpeg/jpegmodule.h"
 
 #include <setjmp.h>
+#include <string.h>
 
 #include <memory>
 #include <utility>
diff --git a/core/fxcodec/jpx/cjpx_decoder.cpp b/core/fxcodec/jpx/cjpx_decoder.cpp
index c66985a7f..9c1122b75 100644
--- a/third_party/pdfium/core/fxcodec/jpx/cjpx_decoder.cpp
+++ b/third_party/pdfium/core/fxcodec/jpx/cjpx_decoder.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxcodec/jpx/cjpx_decoder.h"
 
+#include <string.h>
+
 #include <algorithm>
 #include <limits>
 #include <utility>
diff --git a/core/fxge/cfx_cliprgn.cpp b/core/fxge/cfx_cliprgn.cpp
index 5369d522c..d198852e3 100644
--- a/third_party/pdfium/core/fxge/cfx_cliprgn.cpp
+++ b/third_party/pdfium/core/fxge/cfx_cliprgn.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/cfx_cliprgn.h"
 
+#include <string.h>
+
 #include <utility>
 
 #include "core/fxge/dib/cfx_dibitmap.h"
diff --git a/core/fxge/dib/cfx_bitmapcomposer.cpp b/core/fxge/dib/cfx_bitmapcomposer.cpp
index 6f9b42013..0f1ffae2c 100644
--- a/third_party/pdfium/core/fxge/dib/cfx_bitmapcomposer.cpp
+++ b/third_party/pdfium/core/fxge/dib/cfx_bitmapcomposer.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/dib/cfx_bitmapcomposer.h"
 
+#include <string.h>
+
 #include "core/fxge/cfx_cliprgn.h"
 #include "core/fxge/dib/cfx_dibitmap.h"
 
diff --git a/core/fxge/dib/cfx_bitmapstorer.cpp b/core/fxge/dib/cfx_bitmapstorer.cpp
index f57c00eaa..45a0a180c 100644
--- a/third_party/pdfium/core/fxge/dib/cfx_bitmapstorer.cpp
+++ b/third_party/pdfium/core/fxge/dib/cfx_bitmapstorer.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/dib/cfx_bitmapstorer.h"
 
+#include <string.h>
+
 #include <utility>
 
 #include "core/fxge/dib/cfx_dibitmap.h"
diff --git a/core/fxge/dib/cfx_dibbase.cpp b/core/fxge/dib/cfx_dibbase.cpp
index 4ec0ddbf9..a1de2fbec 100644
--- a/third_party/pdfium/core/fxge/dib/cfx_dibbase.cpp
+++ b/third_party/pdfium/core/fxge/dib/cfx_dibbase.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/dib/cfx_dibbase.h"
 
+#include <string.h>
+
 #include <algorithm>
 #include <memory>
 #include <utility>
diff --git a/core/fxge/dib/cfx_dibitmap.cpp b/core/fxge/dib/cfx_dibitmap.cpp
index d7ccf6cfa..94e8accdd 100644
--- a/third_party/pdfium/core/fxge/dib/cfx_dibitmap.cpp
+++ b/third_party/pdfium/core/fxge/dib/cfx_dibitmap.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/dib/cfx_dibitmap.h"
 
+#include <string.h>
+
 #include <limits>
 #include <memory>
 #include <utility>
diff --git a/core/fxge/dib/cfx_scanlinecompositor.cpp b/core/fxge/dib/cfx_scanlinecompositor.cpp
index e8362d708..c04c6dcab 100644
--- a/third_party/pdfium/core/fxge/dib/cfx_scanlinecompositor.cpp
+++ b/third_party/pdfium/core/fxge/dib/cfx_scanlinecompositor.cpp
@@ -6,6 +6,8 @@
 
 #include "core/fxge/dib/cfx_scanlinecompositor.h"
 
+#include <string.h>
+
 #include <algorithm>
 
 #include "core/fxge/dib/fx_dib.h"
-- 
2.31.1

