From e925deab264e5ebc3c5c13415aa3d44a746e8d45 Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jose.dapena@lge.com>
Date: Fri, 25 Oct 2019 14:53:51 +0000
Subject: [PATCH] GCC: avoid clash of WebThemeEngine::ForcedColors with
 ForcedColors enum class
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

GCC fails to build because the declaration of the enum class ForcedColors
clashes with the GetForcedColors method.

Bug: 819294
Change-Id: I5c7647978d15c771f5372a8c70ac6aeb2284fb2f
Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/1879452
Reviewed-by: Kentaro Hara <haraken@chromium.org>
Commit-Queue: Jos√© Dapena Paz <jose.dapena@lge.com>
Cr-Commit-Position: refs/heads/master@{#709469}
---
 content/child/webthemeengine_impl_android.cc                  | 2 +-
 content/child/webthemeengine_impl_android.h                   | 2 +-
 content/child/webthemeengine_impl_default.cc                  | 2 +-
 content/child/webthemeengine_impl_default.h                   | 2 +-
 content/child/webthemeengine_impl_mac.cc                      | 2 +-
 content/child/webthemeengine_impl_mac.h                       | 2 +-
 third_party/blink/public/platform/web_theme_engine.h          | 2 +-
 third_party/blink/renderer/core/css/media_values.cc           | 2 +-
 third_party/blink/renderer/core/css/style_engine.cc           | 4 ++--
 third_party/blink/renderer/core/dom/document.cc               | 2 +-
 .../blink/renderer/core/testing/color_scheme_helper.cc        | 2 +-
 11 files changed, 12 insertions(+), 12 deletions(-)

diff --git a/content/child/webthemeengine_impl_default.cc b/content/child/webthemeengine_impl_default.cc
index bf8bd544d8f1..a126964b3e81 100644
--- a/content/child/webthemeengine_impl_default.cc
+++ b/content/child/webthemeengine_impl_default.cc
@@ -232,7 +232,7 @@ void WebThemeEngineDefault::cacheScrollBarMetrics(
 }
 #endif
 
-blink::ForcedColors WebThemeEngineDefault::ForcedColors() const {
+blink::ForcedColors WebThemeEngineDefault::GetForcedColors() const {
   return ui::NativeTheme::GetInstanceForWeb()->UsesHighContrastColors()
              ? blink::ForcedColors::kActive
              : blink::ForcedColors::kNone;
diff --git a/content/child/webthemeengine_impl_default.h b/content/child/webthemeengine_impl_default.h
index 181223b8856f..755a6d8afe32 100644
--- a/content/child/webthemeengine_impl_default.h
+++ b/content/child/webthemeengine_impl_default.h
@@ -39,7 +39,7 @@ class WebThemeEngineDefault : public blink::WebThemeEngine {
                                     int32_t vertical_arrow_bitmap_height,
                                     int32_t horizontal_arrow_bitmap_width);
 #endif
-  blink::ForcedColors ForcedColors() const override;
+  blink::ForcedColors GetForcedColors() const override;
   void SetForcedColors(const blink::ForcedColors forced_colors) override;
 };
 
diff --git a/third_party/blink/public/platform/web_theme_engine.h b/third_party/blink/public/platform/web_theme_engine.h
index 2b55c0b0bafa..8fba3f2f83ea 100644
--- a/third_party/blink/public/platform/web_theme_engine.h
+++ b/third_party/blink/public/platform/web_theme_engine.h
@@ -226,7 +226,7 @@ class WebThemeEngine {
     return base::nullopt;
   }
 
-  virtual ForcedColors ForcedColors() const { return ForcedColors::kNone; }
+  virtual ForcedColors GetForcedColors() const { return ForcedColors::kNone; }
   virtual void SetForcedColors(const blink::ForcedColors forced_colors) {}
 };
 
diff --git a/third_party/blink/renderer/core/css/media_values.cc b/third_party/blink/renderer/core/css/media_values.cc
index 045d7937d148..f7c0484a11e3 100644
--- a/third_party/blink/renderer/core/css/media_values.cc
+++ b/third_party/blink/renderer/core/css/media_values.cc
@@ -221,7 +221,7 @@ bool MediaValues::CalculatePrefersReducedMotion(LocalFrame* frame) {
 
 ForcedColors MediaValues::CalculateForcedColors() {
   if (Platform::Current() && Platform::Current()->ThemeEngine())
-    return Platform::Current()->ThemeEngine()->ForcedColors();
+    return Platform::Current()->ThemeEngine()->GetForcedColors();
   else
     return ForcedColors::kNone;
 }
diff --git a/third_party/blink/renderer/core/dom/document.cc b/third_party/blink/renderer/core/dom/document.cc
index fe3647ab4263..7d406ccb38f3 100644
--- a/third_party/blink/renderer/core/dom/document.cc
+++ b/third_party/blink/renderer/core/dom/document.cc
@@ -8624,7 +8624,7 @@ void Document::ColorSchemeChanged() {
 bool Document::InForcedColorsMode() const {
   return RuntimeEnabledFeatures::ForcedColorsEnabled() && Platform::Current() &&
          Platform::Current()->ThemeEngine() &&
-         Platform::Current()->ThemeEngine()->ForcedColors() !=
+         Platform::Current()->ThemeEngine()->GetForcedColors() !=
              ForcedColors::kNone;
 }
 
-- 
2.23.0
